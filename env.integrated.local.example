# Backend Environment Configuration - Local Development with Online Databases
# Copy this file to .env.integrated and update with your actual credentials
#
# Usage:
#   cp env.integrated.local.example .env.integrated
#   # Then edit .env.integrated with your actual database credentials

# ============================================
# Server Configuration
# ============================================
NODE_ENV=development
# Use 5001 for local dev if 5000 is taken (e.g. macOS AirPlay Receiver)
PORT=5001

# ============================================
# Database Configuration - Online Databases
# ============================================

# Shared Database (platforms_99) - Users and Platform Privileges
# This database is shared across multiple platforms
SHARED_DB_HOST=your-cloud-sql-host-or-ip
SHARED_DB_PORT=5432
SHARED_DB_NAME=platforms_99
SHARED_DB_USER=your-db-user
SHARED_DB_PASSWORD=your-db-password

# App Database (aarogya_mitra) - Application Data
# This database contains all Aarogya Mitra specific data
DB_HOST=your-cloud-sql-host-or-ip
DB_PORT=5432
DB_NAME=aarogya_mitra
DB_USER=your-db-user
DB_PASSWORD=your-db-password

# SSL Configuration
# Set to 'true' for cloud databases (Cloud SQL, AWS RDS, etc.)
# Set to 'false' when using Cloud SQL Proxy (proxy handles SSL)
DB_SSL=true

# Connection Pool Settings
DB_POOL_MAX=10
DB_POOL_MIN=2

# ============================================
# Authentication & Security
# ============================================
JWT_SECRET=your-super-secret-jwt-key-here-change-in-production
JWT_EXPIRES_IN=7d

# ============================================
# External Services
# ============================================

# Azure Communication Services (for OTP/SMS)
AZURE_COMMUNICATION_CONNECTION_STRING=your-azure-communication-connection-string
AZURE_COMMUNICATION_PHONE_NUMBER=your-azure-phone-number

# Gemini AI (for document scanning and extraction)
# Create key at https://aistudio.google.com/app/apikey
# For production, use GCP Secret Manager (see GEMINI-GCP-SECRET-SETUP.md)
# For local dev only: GEMINI_API_KEY=your-gemini-api-key
# Or: export GEMINI_API_KEY=$(gcloud secrets versions access latest --secret=GEMINI_API_KEY --project=platforms-476017)
GEMINI_API_KEY=your-gemini-api-key

# Google Cloud Storage (for document uploads: scanned prescriptions, receipts, test results)
# Create the bucket once: ./create-gcs-document-bucket.sh
GCS_BUCKET=aarogya-mitra-documents
# Optional: for local dev, use a service account key (JSON). Leave unset to use gcloud ADC.
# GCP_SERVICE_ACCOUNT_JSON={"type":"service_account",...}

# User Service (99Platforms backend)
USER_SERVICE_URL=https://platforms-99-backend-839584127235.asia-south1.run.app/api
USER_SERVICE_PHONE=+919999999999
USER_SERVICE_PIN=9999
USER_SERVICE_PLATFORM=aarogya-mitra

# ============================================
# CORS & Security
# ============================================
# Comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:5173,http://localhost:3000,http://localhost:5001

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=1000

# ============================================
# Admin Configuration
# ============================================
ADMIN_EMAIL=admin@neoabhro.com
ADMIN_PHONE=+1234567890
FALLBACK_PIN=9999

# ============================================
# Platform Configuration
# ============================================
PLATFORM_NAME=aarogya-mitra

# ============================================
# Notes for Cloud SQL Proxy Setup
# ============================================
# If using Cloud SQL Proxy, update these values:
# DB_HOST=127.0.0.1
# SHARED_DB_HOST=127.0.0.1
# DB_PORT=5432
# SHARED_DB_PORT=5432
# DB_SSL=false
